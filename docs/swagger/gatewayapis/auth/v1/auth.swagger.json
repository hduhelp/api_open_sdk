{
  "swagger": "2.0",
  "info": {
    "title": "gatewayapis/auth/v1/auth.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "AuthService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/console/bind": {
      "delete": {
        "summary": "删除用户绑定",
        "operationId": "AuthService_DeleteUserBind2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteUserBindResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "platformID",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/console/bind/check": {
      "get": {
        "summary": "检查用户绑定",
        "operationId": "AuthService_GetUserBindCheck2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserBindCheckResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/console/binds": {
      "get": {
        "summary": "用户获取绑定列表",
        "operationId": "AuthService_GetUserBindList2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserBindListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      }
    },
    "/console/login": {
      "delete": {
        "summary": "删除用户指定令牌",
        "operationId": "AuthService_DeleteUserLoginToken2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteUserLoginTokenResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "EncryptedToken",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/console/login/history": {
      "get": {
        "summary": "获取用户登录历史信息",
        "operationId": "AuthService_GetUserLoginHistory2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserLoginHistoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "rpp",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "showAll",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/token": {
      "delete": {
        "summary": "用户注销当前令牌",
        "operationId": "AuthService_DeleteToken2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteTokenResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/token/validate": {
      "get": {
        "summary": "用户获得Token基本信息",
        "operationId": "AuthService_GetTokenInfo2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetTokenInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/token": {
      "get": {
        "summary": "用户获得Token基本信息",
        "operationId": "AuthService_GetTokenInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetTokenInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      },
      "delete": {
        "summary": "用户注销当前令牌",
        "operationId": "AuthService_DeleteToken",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteTokenResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/user/bind": {
      "get": {
        "summary": "获取用户绑定信息",
        "operationId": "AuthService_GetUserBind",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserBindResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      },
      "delete": {
        "summary": "删除用户绑定",
        "operationId": "AuthService_DeleteUserBind",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteUserBindResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "platformID",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/user/bind/check": {
      "get": {
        "summary": "检查用户绑定",
        "operationId": "AuthService_GetUserBindCheck",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserBindCheckResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "platform",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/user/bind/list": {
      "get": {
        "summary": "用户获取绑定列表",
        "operationId": "AuthService_GetUserBindList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserBindListResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/user/login/history": {
      "get": {
        "summary": "获取用户登录历史信息",
        "operationId": "AuthService_GetUserLoginHistory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1GetUserLoginHistoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "rpp",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "showAll",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    },
    "/v1/user/login/token": {
      "delete": {
        "summary": "删除用户指定令牌",
        "operationId": "AuthService_DeleteUserLoginToken",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1DeleteUserLoginTokenResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "EncryptedToken",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "AuthService"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "protobufNullValue": {
      "type": "string",
      "enum": [
        "NULL_VALUE"
      ],
      "default": "NULL_VALUE",
      "description": "`NullValue` is a singleton enumeration to represent the null value for the\n`Value` type union.\n\n The JSON representation for `NullValue` is JSON `null`.\n\n - NULL_VALUE: Null value."
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1Bind": {
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "title": "用户user_id"
        },
        "platform": {
          "type": "string",
          "title": "绑定平台"
        },
        "uid": {
          "type": "string"
        },
        "uid2": {
          "type": "string"
        },
        "primary": {
          "type": "boolean",
          "title": "是否为主学工号"
        },
        "remark": {
          "type": "string",
          "title": "备注"
        },
        "attributes": {
          "type": "object",
          "title": "额外信息，json 格式"
        }
      },
      "title": "用户绑定信息"
    },
    "v1BindInfo": {
      "type": "object",
      "properties": {
        "platformID": {
          "type": "string"
        },
        "platformName": {
          "type": "string"
        },
        "createdAt": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "v1DeleteTokenResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1DeleteUserBindResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1DeleteUserDeviceResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1DeleteUserLoginTokenResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetBindListByUserIdListResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1Bind"
          },
          "title": "绑定信息列表"
        }
      },
      "title": "用户绑定信息查询响应"
    },
    "v1GetImageUploadTicketResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "Data": {
          "$ref": "#/definitions/v1ImageUploadTicket"
        }
      }
    },
    "v1GetTokenInfoResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/v1TokenInfo"
        }
      }
    },
    "v1GetUserBindCheckResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetUserBindListResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/v1GetUserBindListResponseData"
        }
      }
    },
    "v1GetUserBindListResponseData": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "int64"
        },
        "bindDetail": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1BindInfo"
          }
        }
      }
    },
    "v1GetUserBindResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetUserDeviceListResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetUserDeviceResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetUserInfoLegacyResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/v1UserInfoLegacy"
        }
      }
    },
    "v1GetUserInfoResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1GetUserLoginHistoryResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        },
        "data": {
          "$ref": "#/definitions/v1GetUserLoginHistoryResponseData"
        }
      }
    },
    "v1GetUserLoginHistoryResponseData": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "format": "int64"
        },
        "detail": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1LoginSession"
          }
        }
      }
    },
    "v1ImageUploadTicket": {
      "type": "object",
      "properties": {
        "ticket": {
          "type": "string"
        },
        "validTIme": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "v1LoginSession": {
      "type": "object",
      "properties": {
        "createdAt": {
          "type": "integer",
          "format": "int64"
        },
        "deletedAt": {
          "type": "integer",
          "format": "int64"
        },
        "encryptedToken": {
          "type": "string"
        },
        "clientID": {
          "type": "string"
        },
        "clientName": {
          "type": "string"
        },
        "grantType": {
          "type": "string"
        },
        "grantTypeDesc": {
          "type": "string"
        }
      }
    },
    "v1PostUserDeviceResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1PutUserPrimaryBindLegacyResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1PutUserPrimaryBindResponse": {
      "type": "object",
      "properties": {
        "error": {
          "type": "integer",
          "format": "int64"
        },
        "msg": {
          "type": "string"
        }
      }
    },
    "v1TokenInfo": {
      "type": "object",
      "properties": {
        "isValid": {
          "type": "boolean"
        },
        "accessToken": {
          "type": "string"
        },
        "expiredTime": {
          "type": "integer",
          "format": "int64"
        },
        "grantType": {
          "type": "string"
        },
        "clientID": {
          "type": "string"
        },
        "tokenType": {
          "$ref": "#/definitions/v1TokenType"
        }
      }
    },
    "v1TokenType": {
      "type": "string",
      "enum": [
        "ORIGIN",
        "OAUTH"
      ],
      "default": "ORIGIN"
    },
    "v1UserInfoLegacy": {
      "type": "object",
      "properties": {
        "nowStaffId": {
          "type": "string"
        },
        "staffIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "school": {
          "type": "string"
        }
      }
    }
  }
}
